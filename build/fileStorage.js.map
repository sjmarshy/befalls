{"version":3,"sources":["../src/fileStorage.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACzB,IAAM,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;;AAEjC,SAAS,IAAI,CAAC,IAAI,EAAE;;AAElB,SAAO,IAAI,OAAO,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;;AAE/B,MAAE,CAAC,IAAI,CAAC,IAAI,EAAE,UAAC,GAAG,EAAE,KAAK,EAAK;;AAE5B,UAAI,GAAG,EAAE;;AAEP,eAAO,GAAG,CAAC,GAAG,CAAC,CAAC;OACjB,MAAM;;AAEL,eAAO,GAAG,CAAC,KAAK,CAAC,CAAC;OACnB;KACF,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;AAED,SAAS,KAAK,CAAC,GAAG,EAAE,QAAQ,EAAE;;AAE5B,SAAO,IAAI,OAAO,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;;AAE/B,MAAE,CAAC,SAAS,CAAC,GAAG,EAAE,QAAQ,EAAE,UAAC,GAAG,EAAK;;AAEnC,UAAI,GAAG,EAAE;;AAEP,eAAO,GAAG,CAAC,GAAG,CAAC,CAAC;OACjB,MAAM;;AAEL,eAAO,GAAG,CAAC,IAAI,CAAC,CAAC;OAClB;KACF,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;AAED,SAAS,iBAAiB,CAAC,GAAG,EAAE;;AAE9B,SAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,KAAK,EAAK;;AAE/B,QAAI,KAAK,CAAC,MAAM,EAAE,EAAE;;AAElB,YAAM,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;KAC/B,MAAM;;AAEL,WAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;;AAEjB,aAAO,IAAI,CAAC;KACb;GAEF,CAAC,CAAC,KAAK,CAAC,UAAC,CAAC,EAAK;;AAEd,QAAI,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;;AAErC,WAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACjB,aAAO,IAAI,CAAC;KACb,MAAM;;AAEL,YAAM,CAAC,CAAC;KACT;GACF,CAAC,CAAC;CACJ;;AAED,SAAS,QAAQ,CAAC,GAAG,EAAE;;AAErB,SAAO,IAAI,OAAO,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;;AAE/B,MAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,UAAC,GAAG,EAAE,IAAI,EAAK;;AAE9B,UAAI,GAAG,EAAE;;AAEP,eAAO,GAAG,CAAC,GAAG,CAAC,CAAC;OACjB,MAAM;;AAEL,eAAO,GAAG,CAAC,IAAI,CAAC,CAAC;OAClB;KACF,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;AAED,MAAM,CAAC,OAAO,GAAG;AACf,mBAAiB,EAAjB,iBAAiB;AACjB,UAAQ,EAAR,QAAQ;AACR,OAAK,EAAL,KAAK;CACN,CAAC","file":"fileStorage.js","sourcesContent":["\"use strict\";\n\nconst fs = require(\"fs\");\nconst e = require(\"./errors.js\");\n\nfunction stat(path) {\n\n  return new Promise((res, rej) => {\n\n    fs.stat(path, (err, stats) => {\n\n      if (err) { \n\n        return rej(err);\n      } else {\n\n        return res(stats);\n      }\n    });\n  });\n}\n\nfunction write(loc, contents) {\n\n  return new Promise((res, rej) => {\n\n    fs.writeFile(loc, contents, (err) => {\n\n      if (err) {\n\n        return rej(err);\n      } else {\n\n        return res(true);\n      }\n    });\n  });\n}\n\nfunction createStorageFile(loc) {\n\n  return stat(loc).then((stats) => {\n\n    if (stats.isFile()) {\n\n      throw new e.FileExistsError();\n    } else {\n\n      write(loc, \"[]\");\n\n      return true;\n    }\n\n  }).catch((e) => {\n\n    if (e.message.search(/ENOENT/) !== -1) {\n\n      write(loc, \"[]\");\n      return true;\n    } else {\n\n      throw e;\n    }\n  });\n}\n\nfunction readFile(loc) {\n  \n  return new Promise((res, rej) => {\n\n    fs.readFile(loc, (err, data) => {\n\n      if (err) {\n\n        return rej(err);\n      } else {\n\n        return res(data);\n      }\n    });\n  });\n}\n\nmodule.exports = {\n  createStorageFile,\n  readFile,\n  write\n};\n"]}